<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Painel motorista</title>
    <link rel="stylesheet" href="css.css" />
  </head>
  <body onload="exibirCPU(),exibirGPU(),goTo(),goTo1(),goTo2(),goTo3()">
    <div class="ipadBox">
      <button class="powerButton" onclick="powerMe();">I</button>
      <div class="ipadScreen">
        <div class="table">
          <div class="table-cell">
            <div class="area">
              <!--This is the Structure of your chart-->
              <div class="chart">
                <div class="radio_chart" id="radioChartContent1"></div>
                <div class="cap">
                  <h1>Temperatura CPU</h1>
                  <h3>/ 100ÂºC</h3>
                </div>
                <div class="value" id="percentValue1">0ÂºC</div>
              </div>
            </div>
            <div class="table-cell2">
              <h2 id="span_nome_usuario_bem_vindo" class="nome-usuario">
                <b>OlÃ¡, Barbara Oliveira !!!</b>
              </h2>
              <div id="main2">
                <div class="dadosTablet">
                  <h1>CPU:</h1>
                  <h1 id="cardCPU"></h1>
                </div>
                <div class="dadosTablet">
                  <h1>GPU:</h1>
                  <h1 id="cardGPU"></h1>
                </div>
              </div>
              <div class="alertas">
                <h1>Alertas</h1>
                <div class="alertas-mensage">
                  Assuma o controle do volante ðŸš¨
                </div>
              </div>
            </div>
            <div class="area">
              <!--This is the Structure of your chart-->
              <div class="chart">
                <div class="radio_chart" id="radioChartContent"></div>
                <div class="cap">
                  <h1>NÃ­vel da bateria</h1>
                  <h3>/ 100%</h3>
                </div>
                <div class="value" id="percentValue">0%</div>
              </div>
            </div>
          </div>
          <div class="table-cell">
            <div class="area">
              <!--This is the Structure of your chart-->
              <div class="chart">
                <div class="radio_chart" id="radioChartContent2"></div>
                <div class="cap">
                  <h1>Temperatura GPU</h1>
                  <h3>/ 100ÂºC</h3>
                </div>
                <div class="value" id="percentValue2">0ÂºC</div>
              </div>
            </div>
            <div class="area">
              <!--This is the Structure of your chart-->
              <div class="chart">
                <div class="radio_chart" id="radioChartContent3"></div>
                <div class="cap">
                  <h1>Temperatura bateria</h1>
                  <h3>/ 100ÂºC</h3>
                </div>
                <div class="value" id="percentValue3">0%</div>
              </div>
            </div>
          </div>
        </div>
        <div class="lockScreen" onclick="lockClick();">
          <div class="lockContent">
            <div class="img-logo">
              <img src="image1.jpg" alt="" width="480px" />
            </div>
          </div>
          <div class="interactionBar"></div>
        </div>
        <div class="interactionBar" id="inAppBar" onclick="goHome();"></div>
      </div>
    </div>
  </body>
</html>

<script>
  function lockClick() {
    document.getElementsByClassName("lockScreen")[0].style.backdropFilter =
      "blur(2vh) brightness(1.2)";
    document.getElementsByClassName("lockScreen")[0].style.top = "-110%";
    document.getElementsByClassName("dockWrapper")[0].style.bottom = "3%";
  }

  function goHome() {
    document.getElementById("inAppBar").style.bottom = "-8%";
    document.getElementById("inAppBar").style.pointerEvents = "none";
    document.getElementsByClassName("wallpaper")[0].style.backgroundImage =
      "url('https://assets.codepen.io/2722301/bg.jpg')";
    document.getElementsByClassName("dockWrapper")[0].style.bottom = "3%";
    resetIcons();
  }

  powerVar = 0;
  setTimeout(function () {
    document.getElementsByClassName("ipadScreen")[0].style.opacity = 1;
  }, 1000);
</script>

<script>

function exibirCPU() {
  fetch(`/tablet/exibirCPU`)
    .then(function (response) {
      if (response.ok) {
        response.json().then(function (resposta) {
          console.log(`Dados recebidos: ${JSON.stringify(resposta)}`);
          arrayTablet = resposta;

          cardCPU.innerHTML += `<p>${arrayTablet[0].cpuUso}</p>`;
          const frame1 = parseFloat(arrayTablet[0].cpuUso.replace(',', '.')); // Converte para nÃºmero usando parseFloat
          goTo1(frame1); // Chama goTo1 com o valor recebido como frame1
        });
      } else {
        console.error("Nenhum dado encontrado ou erro na API");
      }
    })
    .catch(function (error) {
      console.error(`Erro na obtenÃ§Ã£o dos dados p/ idEmpresa: ${error.message}`);
    });
  return false;
}

  function exibirGPU() {
    fetch(`/tablet/exibirGPU`)
      .then(function (response) {
        if (response.ok) {
          response.json().then(function (resposta) {
            console.log(`Dados recebidos: ${JSON.stringify(resposta)}`);
            arrayTablet = resposta;

            cardGPU.innerHTML += `<p>${arrayTablet[0].memoria}</p>
`;
            frame2 = arrayTablet[0].memoria;
            const memoriaComVirgula = substituirPontoPorVirgula(frame2);
          });
        } else {
          console.error("Nenhum dado encontrado ou erro na API");
        }
      })
      .catch(function (error) {
        console.error(
          `Erro na obtenÃ§Ã£o dos dados p/ idEmpresa: ${error.message}`
        );
      });
    return false;
  }

  function goTo1(frame1) {
  reset();

  setTimeout(function () {
    var chart = document.getElementById("radioChartContent1"),
      pVal = document.getElementById("percentValue1");

    chart.classList.add("animate");
    var currentPercent = 0;

    var currTimeout = setInterval(function () {
      if (currentPercent >= frame1 || currentPercent > 100) { // MudanÃ§a feita aqui para considerar valores maiores que o frame1
        clearInterval(currTimeout);
        chart.style.animationPlayState = "paused";
        chart.style.webkitAnimationPlayState = "paused";

        return false;
      } else {
        currentPercent = frame1; // Atribui o valor de frame1 a currentPercent

        pVal.innerHTML = currentPercent + "ÂºC";
      }
    }, 10);
  }, 100);
}


  function goTo(frame) {
    reset();

    setTimeout(function () {
      var chart = document.getElementById("radioChartContent"),
        pVal = document.getElementById("percentValue");

      chart.classList.add("animate");

      var currentPercent = 0;

      frame = 20;

      var currTimeout = setInterval(function () {
        if (currentPercent == frame || currentPercent > 100) {
          clearInterval(currTimeout);
          chart.style.animationPlayState = "paused";
          chart.style.webkitAnimationPlayState = "paused";

          return false;
        } else {
          currentPercent++;
          pVal.innerHTML = currentPercent + "%";
        }
      }, 10);
    }, 100);
  }

  function goTo2(frame2) {
    reset();

    setTimeout(function () {
      var chart = document.getElementById("radioChartContent2"),
        pVal = document.getElementById("percentValue2");

      chart.classList.add("animate");

      var currentPercent = 0;

      frame2 = 30;

      var currTimeout = setInterval(function () {
        if (currentPercent == frame2 || currentPercent > 100) {
          clearInterval(currTimeout);
          chart.style.animationPlayState = "paused";
          chart.style.webkitAnimationPlayState = "paused";

          return false;
        } else {
          currentPercent++;
          pVal.innerHTML = currentPercent + "ÂºC";
        }
      }, 10);
    }, 100);
  }

  function goTo3(frame3) {
    reset();

    setTimeout(function () {
      var chart = document.getElementById("radioChartContent3"),
        pVal = document.getElementById("percentValue3");

      chart.classList.add("animate");

      var currentPercent = 0;

      frame3 = 40;

      var currTimeout = setInterval(function () {
        if (currentPercent == frame3 || currentPercent > 100) {
          clearInterval(currTimeout);
          chart.style.animationPlayState = "paused";
          chart.style.webkitAnimationPlayState = "paused";

          return false;
        } else {
          currentPercent++;
          pVal.innerHTML = currentPercent + "ÂºC";
        }
      }, 10);
    }, 100);
  }

  function reset() {
    var chart = document.getElementById("radioChartContent3"),
      pVal = document.getElementById("percentValue2");

    chart.classList.remove("animate");
    pVal.innerHTML = "0ÂºC";
  }
</script>
